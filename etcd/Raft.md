## 一致性
它是构建具有容错性（fault-tolerant）的分布式系统的基础。 在一个具有一致性的性质的集群里面，同一时刻所有的结点对存储在其中的某个值都有相同的结果，即对其共享的存储保持一致。集群具有自动恢复的性质，当少数结点失效的时候不影响集群的正常工作，当大多数集群中的结点失效的时候，集群则会停止服务（不会返回一个错误的结果）。


Raft协议的每一个副本都会处于三种状态

* Follower 跟随者
* Candidate 候选人
* Leader 领导者
 
 并且Raft协议将一致性问题分解成了三个独立的子问题：
 1. 领导选举 当现存的Leader宕机时，一个新的Leader将被选举出来
 2. 日志复制 Leader必须从客户端接受日志然后复制到集群中的其他节点，并强制要求其他节点的日志保持相同
 3. 安全性 如果有任何的服务器节点已经应用了一个确定的日志条目到它的状态机中，那么其他服务器节点不能在同一个日志索引位置应用一个不同的指令。
   
### 选举
1. 初始化时，所有节点都是跟随者
2. 如果一段时间没有监听到领导者的消息，那么自己将变成候选人身份
3. 候选人向其他节点发起一次Leader选举请求，其他节点响应这次请求
4. 如多数节点赞同，那么候选人将成为新的领导者
### 日志复制
1. 每次更改的指令会先记录到节点的日志里
2. 在提交之前，领导者节点将变更指令同步到跟随者的节点日志里
3. 随后领导者进入等待状态，直到大多数的节点记录成功的响应
4. 这是领导者将提交记录，然后领导人通知所有其他跟随者提交记录
5. 最终集群状态达成一致
