#### 建立 三次握手

C ->SYN指明客户要连接的服务器端口，以及一个ISN初始序号


#### 四次挥手

* 为什么要四次挥手

因为tcp协议的半关闭特性，tcp提供了字连接的一端关闭发送之后仍能接收另一端消息的能力，只有第二个FIN确认之后，这个连接才算关闭。

* 为什么要有半关闭？

没有半关闭当客户端需要通知服务端，已经完成了客户端数据传输但是仍然要接收服务端的数据，使用两个tcp连接可以是一个选择，但是采用半关闭会更好。

* 为什么需要TIME_WAIT（2MSL）等待?

每个具体的TCP实现必须选择一个报文段最大生存时间（MSL），它是任何报文段在被丢弃前在网络内存在的最大时间。
当TCP执行一个主动关闭时，最后一个ACK发回的时候，该链接必须在TIME_WAIT时间停留2MSL，这样可以让TCP再发送最后的ACK以防这个ACK丢失。
另一种结果是在这个2MSL时间等待内，定义这个连接的插口不能再被使用，这个连接只能在2MSL后再次被使用。

#### TCP KeepAlive 

基本原理是，隔一段时间给连接对端发送一个探测包，如果收到对方回应的 ACK，则认为连接还是存活的，在超过一定重试次数之后还是没有收到对方的回应，则丢弃该 TCP 连接。